{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ produit.title }} | HexaQuÃ©bec</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f5f5f5;
        }
        .product-main {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .product-img {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 10px;
        }
        .quality-badge {
            padding: 5px 10px;
            font-size: 0.9rem;
            border-radius: 5px;
            color: #fff;
        }
        .quality-neuf { background-color: #28a745; }
        .quality-reconditionne { background-color: #ffc107; }
        .quality-occasion { background-color: #17a2b8; }
        .btn-stripe {
            background-color: #6772e5;
            border-color: #6772e5;
            font-weight: 600;
        }
        .btn-stripe:hover {
            background-color: #5469d4;
            border-color: #5469d4;
        }
        .btn-panier {
            background-color: #198754;
            border-color: #198754;
            font-weight: 600;
        }
        .btn-panier:hover {
            background-color: #157347;
            border-color: #157347;
        }
        .similar-products .card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .similar-products .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
    </style>
</head>

<body>
<div class="container py-5">

    <!-- Bouton retour -->
    <a href="{% url 'produits_list' %}" class="btn btn-secondary mb-4">&larr; Retour aux produits</a>

    <!-- Produit principal -->
    <div class="row product-main align-items-center">
        <div class="col-md-6">
            {% if produit.image %}
                <img src="{{ produit.image.url }}" alt="{{ produit.title }}" class="product-img mb-3">
            {% endif %}
            
            <!-- Badge qualitÃ© -->
            {% if produit.quality == "neuf" %}
                <span class="quality-badge quality-neuf">Neuf</span>
            {% elif produit.quality == "reconditionne" %}
                <span class="quality-badge quality-reconditionne">ReconditionnÃ©</span>
            {% else %}
                <span class="quality-badge quality-occasion">Occasion</span>
            {% endif %}
        </div>

        <div class="col-md-6">
            <h2>{{ produit.title }}</h2>
            <p class="fw-bold fs-4">Prix : ${{ produit.price }}</p>
            <p>{{ produit.description }}</p>
            <p><strong>Stock disponible :</strong> {{ produit.stock }}</p>

            <!-- Boutons dâ€™action -->
            <div class="d-grid gap-3 mt-4">
                {% if produit.stock > 0 %}
                    <a href="{% url 'ajouter_panier' produit.id %}" class="btn btn-panier btn-lg">
                        ðŸ›’ Ajouter au panier
                    </a>
                    <a href="{% url 'paiement_stripe' produit.id %}" class="btn btn-stripe btn-lg">
                        ðŸ’³ Acheter avec Stripe
                    </a>
                {% else %}
                    <button class="btn btn-secondary btn-lg w-100" disabled>Rupture de stock</button>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Produits similaires -->
    <h3 class="mt-5 mb-3">Produits similaires</h3>
    <div class="row similar-products g-4">
        {% for p in produits %}
            {% if p.id != produit.id %}
            <div class="col-sm-6 col-md-4 col-lg-3">
                <div class="card">
                    {% if p.image %}
                        <img src="{{ p.image.url }}" class="card-img-top" style="height: 180px; object-fit: cover;">
                    {% endif %}
                    <div class="card-body">
                        <h6 class="card-title">{{ p.title }}</h6>
                        <p class="fw-bold mb-2">${{ p.price }}</p>
                        <a href="{% url 'produit_detail' p.id %}" class="btn btn-primary w-100 btn-sm">
                            Voir le produit
                        </a>
                    </div>
                </div>
            </div>
            {% endif %}
        {% empty %}
            <p class="text-muted">Aucun autre produit disponible pour le moment.</p>
        {% endfor %}
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
